<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- ULTIMATE MOBILE VIEWPORT ‚Äì ensures perfect scaling and prevents zoom issues -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>For Aarju üíñ | From Sumit</title>
  <style>
    /* RESET & FULLSCREEN FIX */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body, html {
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: 'Segoe UI', Roboto, system-ui, -apple-system, sans-serif;
      background: black;
      color: white;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }

    /* INTRO SCREEN ‚Äì perfect tap target */
    #intro {
      position: fixed;
      z-index: 20;
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at center, #1a0b2e 0%, #000 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      cursor: pointer;
      padding: 1.5rem;
      top: 0;
      left: 0;
    }
    #intro h1 {
      font-size: clamp(2.2rem, 10vw, 4rem);
      font-weight: 800;
      margin-bottom: 1.5rem;
      background: linear-gradient(45deg, #ff7eb3, #ff2e63);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: glowPulse 2s infinite alternate;
    }
    #intro p {
      font-size: 2rem;
      font-weight: 500;
      color: #ffb6c1;
      letter-spacing: 2px;
    }
    @keyframes glowPulse {
      0% { filter: drop-shadow(0 0 5px #ff2e63); }
      100% { filter: drop-shadow(0 0 25px #ff0844); }
    }

    /* MAIN SCROLLABLE CONTENT ‚Äì smooth and mobile friendly */
    #mainContent {
      position: relative;
      z-index: 10;
      width: 100vw;
      height: 100vh;
      overflow-y: auto;
      overflow-x: hidden;
      -webkit-overflow-scrolling: touch;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 1rem 2rem;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    #mainContent::-webkit-scrollbar {
      display: none;
    }

    /* ===== MASSIVE PHOTO CONTAINER ‚Äì optimized for mobile ===== */
    #photoContainer {
      width: 100%;
      max-width: 750px;        /* even bigger on large phones */
      margin: 1.2rem auto 1.2rem;
      border-radius: 70px;      
      box-shadow: 0 0 80px #ff4d6d, 0 0 0 8px #ff99cc inset;
      animation: heartbeatGlow 2.2s infinite ease-in-out;
      flex-shrink: 0;
      border: 5px solid #ffb3d9;
      overflow: hidden;
      transition: transform 0.2s;
    }
    #photoContainer:active {
      transform: scale(1.01);
    }

    /* Image itself ‚Äì fills container perfectly */
    #girlfriendPhoto {
      width: 100%;
      height: auto;
      display: block;
      object-fit: cover;
      aspect-ratio: 1/1;        /* square, replace with your gf photo */
      background: #ffd9e6;       /* fallback */
    }

    /* TYPING AREA ‚Äì ultra bold & readable on small screens */
    #typing {
      font-size: 2rem;           /* increased from 1.9rem */
      font-weight: 800;
      line-height: 1.5;
      color: #fff5fa;
      text-shadow: 0 0 20px #ff4d6d, 3px 3px 6px #b3003b;
      max-width: 750px;
      width: 100%;
      margin: 1rem auto 2rem;
      padding: 2rem;
      background: rgba(15, 5, 25, 0.75);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: 60px;
      border: 3px solid #ff4d6d;
      white-space: pre-wrap;
      word-break: break-word;
    }

    /* YES BUTTON ‚Äì giant and tappable */
    #yesBtn {
      background: linear-gradient(145deg, #ff0844, #ff4d6d);
      border: 4px solid #ffe6f0;
      border-radius: 100px;
      color: white;
      padding: 1.8rem 4rem;
      font-size: 2.5rem;
      font-weight: 900;
      letter-spacing: 4px;
      cursor: pointer;
      margin: 1.2rem auto 2.5rem;
      display: block;
      box-shadow: 0 25px 40px #ff2e63, 0 0 60px #ff2e63;
      transition: transform 0.1s ease;
      border: none;
      width: fit-content;
      min-width: 360px;
      max-width: 95%;
      flex-shrink: 0;
      -webkit-tap-highlight-color: transparent;
      text-transform: uppercase;
      line-height: 1.2;
    }
    #yesBtn:active {
      transform: scale(0.95);
      box-shadow: 0 15px 25px #ff2e63;
    }

    /* RESULT MESSAGE ‚Äì big & bold */
    #result {
      font-size: 2.4rem;
      font-weight: 800;
      color: #ffcce6;
      text-align: center;
      margin: 2rem 0;
      padding: 1.8rem;
      width: 100%;
      text-shadow: 0 0 40px #ff1a75, 0 0 80px #ff0066;
    }

    /* SECRET PAGE ‚Äì fullscreen with massive text */
    #secretPage {
      display: none;
      position: fixed;
      z-index: 30;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.98);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      overflow-y: auto;
      padding: 3rem 2rem;
      text-align: center;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    #secretPage h2 {
      font-size: 3.5rem;
      font-weight: 900;
      margin-bottom: 3rem;
      background: linear-gradient(135deg, #ffb3d9, #ff4da6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    #secretPage p {
      font-size: 2.5rem;
      font-weight: 700;
      line-height: 1.6;
      max-width: 850px;
      margin: 0 auto;
      white-space: pre-wrap;
      background: rgba(255, 200, 230, 0.15);
      padding: 3rem;
      border-radius: 100px 40px 100px 40px;
      border: 4px solid #ff4d6d;
      color: #ffeef7;
      text-shadow: 0 0 30px magenta;
    }

    /* HEARTBEAT BUTTON EFFECT */
    .heartbeat {
      animation: btnBeat 1.2s infinite cubic-bezier(0.4, 0, 0.2, 1);
    }
    @keyframes btnBeat {
      0%, 100% { transform: scale(1); filter: brightness(1); }
      30% { transform: scale(1.1); filter: brightness(1.4); box-shadow: 0 0 80px #ff4da6; }
      50% { transform: scale(1.05); }
    }

    /* FLOATING HEARTS ‚Äì romantic ambiance */
    .floating-heart {
      position: fixed;
      width: 30px;
      height: 30px;
      background: #ff4d6d;
      transform: rotate(-45deg);
      opacity: 0.8;
      pointer-events: none;
      animation: floatUp linear infinite;
      z-index: 15;
      border-radius: 4px;
      bottom: -20px;
    }
    .floating-heart::before,
    .floating-heart::after {
      content: "";
      position: absolute;
      width: 30px;
      height: 30px;
      background: #ff4d6d;
      border-radius: 50%;
    }
    .floating-heart::before { top: -15px; left: 0; }
    .floating-heart::after { top: 0; left: 15px; }
    @keyframes floatUp {
      0% { transform: translateY(0) rotate(-45deg); opacity: 0.9; }
      100% { transform: translateY(-120vh) rotate(-45deg); opacity: 0; }
    }

    /* CANVAS BACKGROUND */
    canvas {
      display: block;
      position: fixed;
      top: 0; left: 0;
      width: 100% !important;
      height: 100% !important;
      z-index: 1;
      pointer-events: none;
    }

    #mainContent, #intro, #secretPage { z-index: 5; }
    audio { display: none; }

    /* EXTRA TUNING FOR VERY SMALL SCREENS */
    @media (max-width: 400px) {
      #photoContainer { max-width: 98%; border-radius: 50px; }
      #typing { font-size: 1.8rem; padding: 1.5rem; }
      #yesBtn { font-size: 2rem; min-width: 300px; padding: 1.4rem 2rem; }
      #result { font-size: 2rem; }
      #secretPage p { font-size: 2rem; padding: 2rem; }
    }
  </style>
</head>
<body>

<div id="intro">
  <h1>‚ú® A Special Universe For Aarju ‚ú®</h1>
  <p>Tap to begin ‚ù§Ô∏è</p>
</div>

<!-- Main content after intro -->
<div id="mainContent" style="display: none;">
  <!-- GIRLFRIEND PHOTO - NOW WITH BUILT-IN FALLBACK TO AVOID SECURITY ERRORS -->
  <div id="photoContainer">
    <img src="girlfriend.jpg" alt="Aarju, my love" id="girlfriendPhoto">
  </div>

  <!-- Typing area with extra bold text -->
  <div id="typing"></div>

  <!-- Yes button -->
  <button id="yesBtn">YES, FOREVER üíç</button>

  <!-- Result message -->
  <div id="result"></div>
</div>

<!-- Secret page -->
<div id="secretPage">
  <h2>üíå My Forever Promise üíå</h2>
  <p>
    Aarju,<br />
    You are my heartbeat, my universe, my destiny.<br />
    I promise to love you beyond time, beyond stars, beyond forever.<br />
    ‚ù§Ô∏è ‚Äî Sumit
  </p>
</div>

<!-- Audio elements ‚Äì preload set to 'none' to avoid security warnings -->
<audio id="bgMusic" loop preload="none">
  <source src="romantic.mp3" type="audio/mpeg">
</audio>
<audio id="heartbeatSound" preload="none">
  <source src="heartbeat.mp3" type="audio/mpeg">
</audio>

<!-- Three.js from CDN -->
<script src="https://cdn.jsdelivr.net/npm/three@0.153.0/build/three.min.js"></script>

<script>
  (function() {
    // DOM elements
    const intro = document.getElementById('intro');
    const mainContent = document.getElementById('mainContent');
    const typingDiv = document.getElementById('typing');
    const yesBtn = document.getElementById('yesBtn');
    const resultDiv = document.getElementById('result');
    const secretPage = document.getElementById('secretPage');
    
    const bgMusic = document.getElementById('bgMusic');
    const heartbeatSound = document.getElementById('heartbeatSound');

    // ===== FLOATING HEARTS (mobile optimized) =====
    const maxHearts = 10; // fewer but smoother
    const floatingHearts = [];
    let heartInterval;

    function createFloatingHeart() {
      if (floatingHearts.length >= maxHearts) return;
      const heart = document.createElement('div');
      heart.classList.add('floating-heart');
      heart.style.left = Math.random() * 100 + '%';
      heart.style.bottom = '-20px';
      const duration = 5000 + Math.random() * 5000;
      heart.style.animationDuration = duration + 'ms';
      document.body.appendChild(heart);
      floatingHearts.push(heart);
      setTimeout(() => {
        heart.remove();
        const idx = floatingHearts.indexOf(heart);
        if (idx > -1) floatingHearts.splice(idx, 1);
      }, duration);
    }
    
    // ===== THREE.JS SETUP (lazy init after user gesture) =====
    let scene, camera, renderer, stars, fireworks = [];
    let threeReady = false;
    
    function initThree() {
      if (threeReady) return;
      threeReady = true;
      
      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.z = 40;
      
      renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true, powerPreference: "high-performance" });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      renderer.setClearColor(0x000000, 0);
      document.body.appendChild(renderer.domElement);
      
      const starGeometry = new THREE.BufferGeometry();
      const starCount = 800; // slightly less for mobile
      const starPositions = [];
      for(let i = 0; i < starCount; i++){
        starPositions.push(
          (Math.random() - 0.5) * 250,
          (Math.random() - 0.5) * 250,
          (Math.random() - 0.5) * 250
        );
      }
      starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starPositions, 3));
      const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.7 });
      stars = new THREE.Points(starGeometry, starMaterial);
      scene.add(stars);
      
      window.addEventListener('resize', onWindowResize, false);
      
      animate();
    }
    
    function onWindowResize() {
      if (camera && renderer) {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      }
    }
    
    class FireworkParticle {
      constructor() {
        const hue = Math.random() * 360;
        this.color = new THREE.Color(`hsl(${hue}, 100%, 65%)`);
        this.geometry = new THREE.SphereGeometry(0.18, 6, 6);
        this.material = new THREE.MeshBasicMaterial({ color: this.color });
        this.mesh = new THREE.Mesh(this.geometry, this.material);
        this.mesh.position.set(
          (Math.random() - 0.5) * 10,
          (Math.random() - 0.5) * 10,
          (Math.random() - 0.5) * 10
        );
        this.velocity = new THREE.Vector3(
          (Math.random() - 0.5) * 2.2,
          (Math.random() - 0.5) * 2.2 + 0.8,
          (Math.random() - 0.5) * 2.2
        );
        this.life = 80 + Math.random() * 40;
        scene.add(this.mesh);
      }
      update() {
        this.mesh.position.add(this.velocity);
        this.velocity.multiplyScalar(0.94);
        this.velocity.y -= 0.02;
        this.life--;
        if (this.life <= 0) {
          scene.remove(this.mesh);
          this.mesh.geometry.dispose();
          this.material.dispose();
          return false;
        }
        return true;
      }
    }
    
    function launchFireworks() {
      for (let i = 0; i < 24; i++) {
        fireworks.push(new FireworkParticle());
      }
    }
    
    function animate() {
      requestAnimationFrame(animate);
      if (stars) {
        stars.rotation.y += 0.0004;
        stars.rotation.x += 0.0002;
      }
      fireworks = fireworks.filter(fw => fw.update());
      if (renderer && scene && camera) renderer.render(scene, camera);
    }
    
    // ===== TYPING EFFECT (slower, more dramatic) =====
    const textToType = `From the moment you entered my life,
you became my entire universe.

Your smile lights my darkest nights,
and your laughter fills my soul with joy.

Every day with you is a beautiful adventure,
a story I want to write forever.

Your kindness and strength inspire me,
and your love completes me.

I promise to stand by your side,
through every challenge and celebration.

Will you stay with me forever? üíñ`;

    let idx = 0;
    let typingTimer = null;
    
    function typeText() {
      if (idx < textToType.length) {
        typingDiv.textContent += textToType[idx];
        idx++;
        mainContent.scrollTo({ top: mainContent.scrollHeight, behavior: 'smooth' });
        typingTimer = setTimeout(typeText, 70);
      } else {
        yesBtn.style.display = 'inline-block';
        yesBtn.classList.add('heartbeat');
        mainContent.scrollTo({ top: mainContent.scrollHeight, behavior: 'smooth' });
      }
    }
    
    // ===== HEARTBEAT FEEDBACK =====
    function heartbeatSync() {
      if (navigator.vibrate) navigator.vibrate([300, 150, 300]);
      // Attempt to play sound (only after user gesture)
      heartbeatSound.play().catch(e => console.log('heartbeat audio delayed', e));
    }
    
    // ===== START EXPERIENCE (triggered by intro tap) =====
    function startExperience() {
      intro.style.display = 'none';
      mainContent.style.display = 'flex';
      
      // Start floating hearts
      heartInterval = setInterval(createFloatingHeart, 500);
      
      // Play background music (user gesture)
      bgMusic.play().catch(e => console.log('bg music will play after interaction', e));
      
      // Initialize Three
      initThree();
      
      // Start typing
      typeText();
    }
    
    // ===== SAY YES =====
    function sayYes() {
      if (typingTimer) clearTimeout(typingTimer);
      
      resultDiv.textContent = "üíç‚ù§Ô∏è Aarju & Sumit ‚Äî Forever Begins Now ‚ù§Ô∏èüíç";
      
      launchFireworks();
      heartbeatSync();
      
      yesBtn.style.display = 'none';
      
      setTimeout(() => {
        secretPage.style.display = 'flex';
        clearInterval(heartInterval);
      }, 2000);
    }
    
    // ===== EVENT LISTENERS (all user-initiated) =====
    intro.addEventListener('click', startExperience, { once: true });
    
    yesBtn.addEventListener('click', function(e) {
      e.stopPropagation();
      sayYes();
    });
    
    // Hide secret page initially
    secretPage.style.display = 'none';
    
    // ===== ROBUST IMAGE FALLBACK (prevents broken image icon) =====
    const gfImg = document.getElementById('girlfriendPhoto');
    gfImg.onerror = function() {
      // Embedded romantic SVG ‚Äì no external calls, zero security errors
      this.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='700' height='700' viewBox='0 0 700 700'%3E%3Crect width='700' height='700' fill='%23ffb3d9'/%3E%3Ccircle cx='350' cy='280' r='120' fill='%23ff80b3' stroke='%23ff1a4f' stroke-width='8'/%3E%3Cpath d='M200 430 Q350 570 500 430' stroke='%23ff1a4f' stroke-width='32' fill='none' stroke-linecap='round' /%3E%3Ctext x='220' y='600' font-family='Arial' font-size='80' fill='%23ff1a4f' font-weight='bold'%3EAarju ‚ù§Ô∏è%3C/text%3E%3C/svg%3E";
    };
    
    // If image loads successfully, great; otherwise fallback kicks in.
    // Also set preload to 'none' for audio to avoid console warnings.
  })();
</script>
</body>
</html>
